<div class="container">
  <div class="row center-block" style=" text-align:center; margin-bottom:5px">
    <div class="panel">
      <span class="headline headline-gray">MEET.</span>
      <span class="headline headline-gray">EXPLORE.</span>
      <span class="headline headline-gray" style="color:#4DBFF5">LIVE!</span>
    </div>
  </div>
  <div class="row">
    <%= current_user ? render('layouts/side_nav') : render(nil) %>
    <div class="col-md-8 <%= current_user ? nil : 'col-md-offset-2' %> ">
      <div class="panel" style="height:284px;padding:50px">
        <div class="text-center">
         <div class="btn-group" id="create_search" style="margin-top:-50px;">
          <a href="#search" data-toggle="tab" class="btn active btn-info">Search</a>
          <a href="#create" data-toggle="tab" class="btn btn-default">Create</a>
        </div>
      </div>
      
      <div class="tab-content">
        <div class="tab-pane active" id="search">
          <%= form_tag("/activities/search", method: "post") do %>
          <form role="form">
            <div class="form-group">
              <div class="input-group input-group-lg">
                <%= search_field_tag :terms, nil, placeholder: "Search for Activitiesâ€¦by name, venue, user", class: "form-control" %>
                <span class="input-group-btn">
                  <%= submit_tag "Search", class: "btn btn-success" %>
                </span>
              </div><!-- /input-group -->
              <div class="row" style="margin-top:5px">
                <div class="col-xs-4 col-md-4 col-lg-3">
                  <div class="btn-group">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                      <span class="selection">Today</span> <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                      <li><a href="#">This Week</a></li>
                      <li><a href="#">This Weekend</a></li>
                      <li><a href="#">Next Two Weeks</a></li>
                      <li class="divider"></li>
                      <div class="form-group" style="padding:5px">
                        <label>Start</label>
                        <div class='input-group date col-sm-4' style='width:200px' id='startDatePicker'>
                          <input type="text" class="form-control input-sm">
                          <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                        </div>
                        <label>End</label>
                        <div class='input-group date col-sm-4' style='width:200px' id='endDatePicker'>
                          <input type="text" class="form-control input-sm">
                          <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                        </div>
                      </div>
                    </ul>
                  </div>
                </div>
                <div class="col-xs-4 col-md-4 col-lg-3">
                  <div class="btn-group">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                      <span class="selection">Type</span> <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                      <li><a href="#">All</a></li>
                      <li><a href="#">Sports</a></li>
                      <li><a href="#">Arts</a></li>
                      <li><a href="#">Business</a></li>
                      <li><a href="#">Eat & Drink</a></li>
                      <li><a href="#">Nightlife</a></li>
                      <li><a href="#">Community</a></li>
                    </ul>
                  </div>
                </div>
                <div class="col-xs-4 col-md-4 col-lg-5">
                  Within
                  <div class="btn-group">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                      <span class="selection">25</span> <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                      <li><a href="#">5</a></li>
                      <li><a href="#">25</a></li>
                      <li><a href="#">50</a></li>
                      <li><a href="#">100</a></li>
                      <li><a href="#">200</a></li>
                    </ul>
                  </div>
                  miles of
                  <div class="btn-group">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                      <span class="selection">Denver</span> <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                      <li><a href="#">Denver</a></li>
                      <li><a href="#">Pittsburgh</a></li>
                      <li><a href="#">Atlanta</a></li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="row" style="margin-top:5px; display:none">
                <div class="col-xs-4 col-md-4 col-lg-3">
                  <%= select_tag :when, options_for_select([ ["Today", Date.today + 1], ["This Week", Date.today.at_end_of_week + 1], ["This Month", Date.today.at_end_of_month + 1], ["This Year", Date.today.at_end_of_year + 1] ], Date.today.at_end_of_week + 1) %>
                </div>
                <div class="col-xs-4 col-md-4 col-lg-3">
                  <%= select_tag :type, options_from_collection_for_select(ActivityType.all, "id", "activity_type"), prompt: "Type" %>
                </div>
                <div class="col-xs-4 col-md-4 col-lg-5">
                  Within <%= select_tag :miles, options_for_select([ 5, 25, 50, 100, 200], 25) %> miles of <%= select_tag :location, options_for_select([ ["Denver", "Denver, CO"], ["Pittsburgh", "Pittsburgh, PA"], ["Atlanta", "Atlanta, GA"]]) %> </div>
              </div>
            </div>
            <% end %>
          </form>
        </div>
        <div class="tab-pane" id="create">
          <%= form_tag new_activity_path do %> 
          <div class="input-group input-group-lg" >
            <%= text_field_tag :activity_name, nil, {class: 'form-control', placeholder: 'Activity Name'} %>
            <span class="input-group-btn">
              <%= submit_tag 'Create!', class: 'btn btn-danger' %>
            </span>
          <% end %>
          </div><!-- /input-group -->
        </div>
      </div>
      <button class="btn btn-danger btn-lg center-block " style="color:yellow; margin-top:15px">What's hot!</button>
      <h4 style="margin: 25px 0 0 0px"><small>Trending in Denver: <a href="#">Kickball at Wash Park</a>, <a href="#">Trivia in DTC</a>, <a href="#">Hike a 14er</a></small></h4>
    </div>
  </div>
</div>

<script>
  $(function() {
    $.vegas({
      src:'<%= asset_path 'backgrounds/1.jpg' %>'
    })('overlay', {
      src:"<%= asset_path 'overlays/05.png' %>"
    });
    $.vegas('slideshow', {
      delay:10000,
      backgrounds:[
      { src: '<%= asset_path 'backgrounds/1.jpg' %>', fade:1000 },
      { src: '<%= asset_path 'backgrounds/2.jpg' %>', fade:1000, valign:'70%' },
      { src: '<%= asset_path 'backgrounds/3.jpg' %>', fade:1000 },
      { src: '<%= asset_path 'backgrounds/4.jpg' %>', fade:1000 }
      ]
    })('overlay');
  });

  $("#create_search").children().click(function(e){
   $(this).addClass("active btn-info");
   $(this).siblings().removeClass('active btn-info').addClass('btn-default');
  });

  $(".dropdown-menu li a").click(function(){
    $(this).parents(".btn-group").find('.selection').text($(this).text());
    $(this).parents(".btn-group").find('.selection').val($(this).text());
  });



  $(function () {
      $('#startDatePicker').datetimepicker({
        minDate: "<%= Date.today %>",
        pickTime: false
      });

      $('#endDatePicker').datetimepicker({
        pickTime: false
      });

      $("#startDatePicker").on("dp.change",function (e) {
         $('#endDatePicker').data("DateTimePicker").setMinDate(e.date);
      });
      $("#endDatePicker").on("dp.change",function (e) {
         $('#startDatePicker').data("DateTimePicker").setMaxDate(e.date);
      });

  });

</script>